<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Skin Ailment Classifier</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
</head>
<body>
  <div class="page-shell">
    <header class="page-header">
      <h1>Skin ailment prediction</h1>
    </header>

    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="flash-list">
          {% for msg in messages %}
            <div class="flash-item">{{ msg }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <main class="main-grid">

      <!-- LEFT: Uploaded image panel -->
      <section class="panel panel-left">
        <h2 class="panel-title">Uploaded Image</h2>
        <div class="panel-body">
          {% if filename %}
            <img src="{{ url_for('uploaded_file', filename=filename) }}" alt="Uploaded" class="panel-img">
          {% else %}
            <div class="placeholder large"></div>
          {% endif %}
        </div>
      </section>

      <!-- CENTER: Heatmap / prediction highlights -->
      <section class="panel panel-center">
        <h2 class="panel-title">Prediction highlights</h2>
        <div class="panel-body">
          {% if overlay_filename %}
            <img src="{{ url_for('uploaded_file', filename=overlay_filename) }}" alt="Prediction Overlay" class="panel-img">
          {% else %}
            <div class="placeholder large"></div>
          {% endif %}
        </div>
      </section>

      <!-- RIGHT: Results + uploader dock -->
      <aside class="panel panel-right">
        <h2 class="panel-title">Result</h2>
        <div class="panel-body result-body">
          {% if results %}
            <ol class="results-list">
              {% for cls, prob in results %}
                <li class="result-item">
                  <div class="result-main"><strong>{{ cls }}</strong> â€” {{ '%.2f'|format(prob*100) }}%</div>
                  <div class="result-desc"><em>{{ descriptions.get(cls, 'No description available.') }}</em></div>
                </li>
              {% endfor %}
            </ol>
          {% else %}
            <div class="placeholder small">Result</div>
          {% endif %}
        </div>

        <!-- uploader dock positioned under results (dashed rounded area) -->
        <div class="uploader-dock">
          <form method="post" action="/predict" enctype="multipart/form-data" class="uploader-form">
            <label class="file-chooser">
              <input type="file" name="file" accept="image/*" required />
            </label>

            <div class="predict-row">
              <button type="submit" class="predict-btn">Predict</button>
            </div>
          </form>
        </div>
      </aside>

    </main>

    <footer class="page-footer">
      <p class="disclaimer"><strong>Disclaimer:</strong> This tool provides model based predictions for educational and prototyping purposes and is not a medical diagnosis.</p>
    </footer>
  </div>
</body>
</html>
